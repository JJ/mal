<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Demo Polleitor</title>

    <meta name="description" content="Demo/Prueba de concepto polleitor">
    <meta name="author" content="JJ Merelo">

    <script type="application/javascript">
      var polls = new Array;
      var v = function(data) {
         for (var i in data) {
            console.log( i );
            console.log( data[i] );
            polls[i] = new Array;
            for ( var q in data[i] ) {
              var this_q = new Object;
              this_q[data[i][q].q] = new Array;
              for (var a in data[i][q].a) {
                    this_q[data[i][q].q].push(data[i][q].a[a]);
              }
              console.log( this_q );
              polls[i].push(this_q);
            }
        }
      };

      var view = function(q, a) {
            document.writeln("<h2>" + q + "</h2>");
            document.writeln("<ol>");
            for (var i in a) {
                console.log(a[i]);
                document.writeln("<li>" + a[i] + "</li>");
            }
            document.writeln("</ol>");
        };
    </script>

    <script type="application/javascript" src='/test/p/v'></script>
    <script type="application/javascript" src='/2test/p/v'></script>

</head>

<body>
    <h1>That's all folks</h1>

    <script type="application/javascript">
        for (var p in polls['test']) {
            console.log(polls['test'][p]);
            for (var q in polls['test'][p]) {
                view(q, polls['test'][p][q]);
            }
        }
    </script>

    <script type="application/javascript">
        for (var p in polls['2test']) {
            console.log(polls['2test'][p]);
            for (var q in polls['2test'][p]) {
                view(q, polls['2test'][p][q]);
            }
        }
    </script>
</body>


</html>
